# GitHub Copilot CLI 规则指引

## 1. 项目概述
本项目 `github_daily_report` 是一个用于自动拉取 GitHub 项目、分析内容并生成日报/文章的系统。

## 2. 技术栈
- **后端**: Python 3.11+, Flask
- **前端**: Vue.js 3, Vite
- **数据库**: MySQL 8.0
- **容器化**: Docker, Docker Compose

## 3. 核心开发规则

### 3.1 语言要求
- **Copilot 交互**: Copilot 与开发者的对话、解释、工具调用说明等必须使用 **中文**。
- **文档与注释**: 必须使用 **中文**。
- **AI 交互**: 调用 LLM 时，System Prompt 必须强制要求 AI 使用 **中文** 回复。
- **用户界面**: 所有 UI 文本必须为 **中文**。

### 3.2 后端开发 (Python/Flask)
- **模块化**: 保持代码分层，功能模块化（如 `pull`, `article`, `utils`）。
- **数据库**:
  - 使用 `backend.utils.db` 模块进行数据库连接和操作。
  - 确保 SQL 语句安全，防止注入。
  - 关键数据（如 Prompt 模板、任务记录）必须持久化到 MySQL。
- **LLM 集成**:
  - 使用 `backend.utils.llm` 统一处理模型调用。
  - 必须记录 LLM 的输入输出日志以便调试。
  - 解析 README 时，需提取“详细说明”并生成“简述”（50字以内）。

### 3.3 前端开发 (Vue.js)
- **布局**: 保持简洁风格，Header 固定顶部，Footer 固定底部（或分页栏）。
- **交互**:
  - 异步操作需有加载状态。
  - 错误处理需友好提示（Toast 或 Alert）。
- **组件**: 尽量复用现有组件结构。

### 3.4 数据处理逻辑
- **项目拉取**:
  - 全局拉取时需 **去重**：已存在的项目仅执行 `git pull` 更新，并更新元数据（Star/Fork 数）。
  - 新项目执行 `git clone`。
- **文章生成**:
  - 检查是否已生成：已生成的显示“继续生成”，未生成的显示“生成文章”。
  - 使用 MySQL 中存储的 Prompt 模板（默认提供微信公众号模板）。

## 4. 环境与部署
- **Docker**: 所有服务通过 `docker-compose` 编排。
- **端口**:
  - 前端: 3001
  - 后端: 5001
  - MySQL: 3306 (映射到宿主机)
- **变更验证**: 修改代码后，必须重启相关容器并验证服务健康状态。

## 5. 文档维护
- 每次架构变更或功能新增，需同步更新 `docs/` 下的相关文档。
- 保持 `README.md` 为最新状态。
